% DOC CLASS
\documentclass[11pt]{article}

% ENCODING
\usepackage[utf8]{inputenc}
\usepackage[brazilian]{babel}

% OUTPUT
\usepackage[nottoc]{tocbibind}
\usepackage{hyperref}
\usepackage{fullpage}
\usepackage{graphicx}
\usepackage{multicol}
\usepackage{makeidx}
\usepackage{float}
\usepackage{array}
\usepackage{boxedminipage}
\usepackage{amsmath}
\usepackage{enumitem}
\usepackage{amsfonts}
\usepackage{setspace}
\usepackage{comment}
\usepackage[toc,xindy]{glossaries}

% SOURCE CODE
\usepackage{listings}
\usepackage{color}
\usepackage{xcolor}
\usepackage{caption}
\DeclareCaptionFont{white}{\color{white}}
\DeclareCaptionFormat{listing}{\colorbox{gray}{\parbox{\textwidth}{#1#2#3}}}
\captionsetup[lstlisting]{format=listing,labelfont=white,textfont=white}

% MARGIN
\setlength{\oddsidemargin}{0.5cm} \setlength{\textwidth}{15cm}
\setlength{\topmargin}{-1.5cm} \setlength{\textheight}{22.3cm}%{24.7cm}
\setlength\parindent{0pt} % Removes all indentation from paragraphs
\renewcommand{\labelenumi}{\alph{enumi}.} % Make numbering in the enumerate environment by letter rather than number (e.g. section 6)

% GLOSSARIES
\makeglossaries
\newacronym{rpc}{RPC}{Remote Procedure Calls}

% DOCUMENT
\begin{document}

\title{Disciplina de Sistemas Distrbuídos [INF 2545] \\ Biblioteca RPC - Trabalho 1 \\ 2014.1}
\author{Rogério Carvalho Schneider}
\date{Abril 2014}
\maketitle

\begin{center}
\begin{tabular}{l r}
Data dos testes: & 14 de Abril de 2014 \\
Professora: & Noemi Rodriguez
\end{tabular}
\end{center}

\begin{abstract}
Relatório da implementação e testes realizados na biblioteca \textit{luarpc}.
\end{abstract}

\pagenumbering{arabic} \setcounter{page}{1}
\doublespacing

\section{Introdução}\label{sec:introduction}

Foi desenvolvida uma biblioteca para auxílio a chamadas remotas de
procedimentosi, \gls{rpc}. A biblioteca consiste no arquivo luarpc.lua, que depende da
definição de um arquivo de interface (normalmente chamado de interface.lua) e
que deve ser usada pelas implementações de servidor e cliente.
A biblioteca \gls{rpc} segue as linhas gerais definidas no enunciado do trabalho
\cite{trab1}

\section{Gargalos identificados}\label{sec:bottle}

\section{Melhorias futuras}\label{sec:future}

Diferença de tempo de entre chamadas sem persistência e com persistência de
conexão.

Cliente com loop de chamadas para alguns métodos especiais de teste, com maior
e menor overhead de rede e de encoding.

Servidor com pool de três conexões.
Como se comporta com apenas um cliente?
Como se comporta com três clientes?
Como se comporta com dez clientes?
Como se comporta cada caso com diferentes servidores, o que mantém e o que não
mantém pool de conexões?


 1 cliente - persist
01:46:24
foo took 2 seconds for server 5001 for 10000 runs
oid took 2 seconds for server 5001 for 10000 runs
min took 2 seconds for server 5001 for 10000 runs
min 10KB took 17 seconds for server 5001 for 10000 runs
men took 3 seconds for server 5001 for 10000 runs
tbl took 8 seconds for server 5001 for 10000 runs
foo took 3 seconds for server 5002 for 10000 runs
oid took 2 seconds for server 5002 for 10000 runs
min took 2 seconds for server 5002 for 10000 runs
min 10KB took 20 seconds for server 5002 for 10000 runs
men took 2 seconds for server 5002 for 10000 runs
tbl took 9 seconds for server 5002 for 10000 runs

01:47:39
foo took 2 seconds for server 5001 for 10000 runs
oid took 2 seconds for server 5001 for 10000 runs
min took 2 seconds for server 5001 for 10000 runs
min 10KB took 20 seconds for server 5001 for 10000 runs
men took 2 seconds for server 5001 for 10000 runs
tbl took 8 seconds for server 5001 for 10000 runs
foo took 3 seconds for server 5002 for 10000 runs
oid took 2 seconds for server 5002 for 10000 runs
min took 2 seconds for server 5002 for 10000 runs
min 10KB took 20 seconds for server 5002 for 10000 runs
men took 2 seconds for server 5002 for 10000 runs
tbl took 9 seconds for server 5002 for 10000 runs


00:04:18
foo took 11 seconds for server 5001 for 50000 runs
oid took 7 seconds for server 5001 for 50000 runs
min took 8 seconds for server 5001 for 50000 runs
min 10KB took 110 seconds for server 5001 for 50000 runs
men took 7 seconds for server 5001 for 50000 runs
tbl took 32 seconds for server 5001 for 50000 runs
foo took 10 seconds for server 5002 for 50000 runs
oid took 8 seconds for server 5002 for 50000 runs
min took 9 seconds for server 5002 for 50000 runs
min 10KB took 112 seconds for server 5002 for 50000 runs
men took 8 seconds for server 5002 for 50000 runs
tbl took 40 seconds for server 5002 for 50000 runs

00:44:11
foo took 13 seconds for server 5001 for 50000 runs
oid took 11 seconds for server 5001 for 50000 runs
min took 11 seconds for server 5001 for 50000 runs
min 10KB took 107 seconds for server 5001 for 50000 runs
men took 11 seconds for server 5001 for 50000 runs
tbl took 39 seconds for server 5001 for 50000 runs
foo took 14 seconds for server 5002 for 50000 runs
oid took 10 seconds for server 5002 for 50000 runs
min took 11 seconds for server 5002 for 50000 runs
min 10KB took 106 seconds for server 5002 for 50000 runs
men took 9 seconds for server 5002 for 50000 runs
tbl took 41 seconds for server 5002 for 50000 runs


 3 clientes - persist
01:50:06
foo took 4 seconds for server 5001 for 10000 runs
oid took 3 seconds for server 5001 for 10000 runs
min took 3 seconds for server 5001 for 10000 runs
min 10KB took 22 seconds for server 5001 for 10000 runs
men took 23 seconds for server 5001 for 10000 runs
tbl took 12 seconds for server 5001 for 10000 runs
foo took 10 seconds for server 5002 for 10000 runs
oid took 5 seconds for server 5002 for 10000 runs
min took 5 seconds for server 5002 for 10000 runs
min 10KB took 27 seconds for server 5002 for 10000 runs
men took 18 seconds for server 5002 for 10000 runs
tbl took 19 seconds for server 5002 for 10000 runs

01:50:35
foo took 6 seconds for server 5001 for 10000 runs
oid took 7 seconds for server 5001 for 10000 runs
min took 13 seconds for server 5001 for 10000 runs
min 10KB took 28 seconds for server 5001 for 10000 runs
men took 10 seconds for server 5001 for 10000 runs
tbl took 12 seconds for server 5001 for 10000 runs
foo took 7 seconds for server 5002 for 10000 runs
oid took 9 seconds for server 5002 for 10000 runs
min took 15 seconds for server 5002 for 10000 runs
min 10KB took 31 seconds for server 5002 for 10000 runs
men took 14 seconds for server 5002 for 10000 runs
tbl took 15 seconds for server 5002 for 10000 runs

01:50:36
foo took 7 seconds for server 5001 for 10000 runs
oid took 8 seconds for server 5001 for 10000 runs
min took 18 seconds for server 5001 for 10000 runs
min 10KB took 27 seconds for server 5001 for 10000 runs
men took 9 seconds for server 5001 for 10000 runs
tbl took 11 seconds for server 5001 for 10000 runs
foo took 8 seconds for server 5002 for 10000 runs
oid took 15 seconds for server 5002 for 10000 runs
min took 17 seconds for server 5002 for 10000 runs
min 10KB took 31 seconds for server 5002 for 10000 runs
men took 5 seconds for server 5002 for 10000 runs
tbl took 14 seconds for server 5002 for 10000 runs

01:54:44
foo took 7 seconds for server 5001 for 10000 runs
oid took 10 seconds for server 5001 for 10000 runs
min took 21 seconds for server 5001 for 10000 runs
min 10KB took 31 seconds for server 5001 for 10000 runs
men took 10 seconds for server 5001 for 10000 runs
tbl took 16 seconds for server 5001 for 10000 runs
foo took 9 seconds for server 5002 for 10000 runs
oid took 17 seconds for server 5002 for 10000 runs
min took 18 seconds for server 5002 for 10000 runs
min 10KB took 33 seconds for server 5002 for 10000 runs
men took 6 seconds for server 5002 for 10000 runs
tbl took 12 seconds for server 5002 for 10000 runs

01:54:45
foo took 7 seconds for server 5001 for 10000 runs
oid took 7 seconds for server 5001 for 10000 runs
min took 16 seconds for server 5001 for 10000 runs
min 10KB took 30 seconds for server 5001 for 10000 runs
men took 13 seconds for server 5001 for 10000 runs
tbl took 15 seconds for server 5001 for 10000 runs
foo took 9 seconds for server 5002 for 10000 runs
oid took 7 seconds for server 5002 for 10000 runs
min took 16 seconds for server 5002 for 10000 runs
min 10KB took 29 seconds for server 5002 for 10000 runs
men took 15 seconds for server 5002 for 10000 runs
tbl took 16 seconds for server 5002 for 10000 runs

01:54:46
foo took 4 seconds for server 5001 for 10000 runs
oid took 5 seconds for server 5001 for 10000 runs
min took 4 seconds for server 5001 for 10000 runs
min 10KB took 26 seconds for server 5001 for 10000 runs
men took 25 seconds for server 5001 for 10000 runs
tbl took 17 seconds for server 5001 for 10000 runs
foo took 11 seconds for server 5002 for 10000 runs
oid took 7 seconds for server 5002 for 10000 runs
min took 6 seconds for server 5002 for 10000 runs
min 10KB took 25 seconds for server 5002 for 10000 runs
men took 16 seconds for server 5002 for 10000 runs
tbl took 20 seconds for server 5002 for 10000 runs


00:30:35
foo took 16 seconds for server 5001 for 50000 runs
oid took 16 seconds for server 5001 for 50000 runs
min took 15 seconds for server 5001 for 50000 runs
min 10KB took 88 seconds for server 5001 for 50000 runs
men took 98 seconds for server 5001 for 50000 runs
tbl took 82 seconds for server 5001 for 50000 runs
foo took 43 seconds for server 5002 for 50000 runs
oid took 45 seconds for server 5002 for 50000 runs
min took 19 seconds for server 5002 for 50000 runs
min 10KB took 101 seconds for server 5002 for 50000 runs
men took 17 seconds for server 5002 for 50000 runs
tbl took 79 seconds for server 5002 for 50000 runs

00:30:35
foo took 30 seconds for server 5001 for 50000 runs
oid took 38 seconds for server 5001 for 50000 runs
min took 72 seconds for server 5001 for 50000 runs
min 10KB took 147 seconds for server 5001 for 50000 runs
men took 39 seconds for server 5001 for 50000 runs
tbl took 59 seconds for server 5001 for 50000 runs
foo took 38 seconds for server 5002 for 50000 runs
oid took 91 seconds for server 5002 for 50000 runs
min took 39 seconds for server 5002 for 50000 runs
min 10KB took 140 seconds for server 5002 for 50000 runs
men took 33 seconds for server 5002 for 50000 runs
tbl took 59 seconds for server 5002 for 50000 runs

00:30:34
foo took 31 seconds for server 5001 for 50000 runs
oid took 43 seconds for server 5001 for 50000 runs
min took 73 seconds for server 5001 for 50000 runs
min 10KB took 150 seconds for server 5001 for 50000 runs
men took 35 seconds for server 5001 for 50000 runs
tbl took 65 seconds for server 5001 for 50000 runs
foo took 57 seconds for server 5002 for 50000 runs
oid took 75 seconds for server 5002 for 50000 runs
min took 57 seconds for server 5002 for 50000 runs
min 10KB took 135 seconds for server 5002 for 50000 runs
men took 23 seconds for server 5002 for 50000 runs
tbl took 60 seconds for server 5002 for 50000 runs


 10 clientes - persist
02:04:46
foo took 24 seconds for server 5001 for 10000 runs
oid took 21 seconds for server 5001 for 10000 runs
min took 45 seconds for server 5001 for 10000 runs
min 10KB took 113 seconds for server 5001 for 10000 runs
men took 30 seconds for server 5001 for 10000 runs
tbl took 57 seconds for server 5001 for 10000 runs
foo took 26 seconds for server 5002 for 10000 runs
oid took 25 seconds for server 5002 for 10000 runs
min took 48 seconds for server 5002 for 10000 runs
min 10KB took 110 seconds for server 5002 for 10000 runs
men took 33 seconds for server 5002 for 10000 runs
tbl took 56 seconds for server 5002 for 10000 runs


 Table apenas
tblonly serialize took 4 seconds for 10000 runs
tblonly deserialize took 2 seconds for 10000 runs
tblonly serialize/deserialize took 6 seconds for 10000 runs

tblonly serialize took 22 seconds for 50000 runs
tblonly deserialize took 7 seconds for 50000 runs
tblonly serialize/deserialize took 32 seconds for 50000 runs


 1 cliente - close connection
02:23:45
foo took 4 seconds for server 5001 for 10000 runs
oid took 4 seconds for server 5001 for 10000 runs
min took 4 seconds for server 5001 for 10000 runs
min 10KB took 21 seconds for server 5001 for 10000 runs
men took 4 seconds for server 5001 for 10000 runs
tbl took 10 seconds for server 5001 for 10000 runs
foo took 5 seconds for server 5002 for 10000 runs
oid took 4 seconds for server 5002 for 10000 runs
min took 4 seconds for server 5002 for 10000 runs
min 10KB took 21 seconds for server 5002 for 10000 runs
men took 4 seconds for server 5002 for 10000 runs
tbl took 11 seconds for server 5002 for 10000 runs


 3 clientes - close connection
02:33:17
foo took 5 seconds for server 5001 for 10000 runs
oid took 7 seconds for server 5001 for 10000 runs
min took 8 seconds for server 5001 for 10000 runs
min 10KB took 32 seconds for server 5001 for 10000 runs
men took 10 seconds for server 5001 for 10000 runs
tbl took 17 seconds for server 5001 for 10000 runs
foo took 10 seconds for server 5002 for 10000 runs
oid took 9 seconds for server 5002 for 10000 runs
min took 8 seconds for server 5002 for 10000 runs
min 10KB took 35 seconds for server 5002 for 10000 runs
men took 6 seconds for server 5002 for 10000 runs
tbl took 19 seconds for server 5002 for 10000 runs

% BIB
\bibliographystyle{abnt-puc-rio}
\bibliography{reference}

\end{document}
